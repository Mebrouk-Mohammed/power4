<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Mon profil</title>
</head>
<body style="margin:0; padding:20px; background:#050814; color:#f5f5f5; font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;">

<p style="margin-bottom:12px;">
    <a href="/legacy" style="color:#7da6ff; text-decoration:none; font-size:14px;">â¬… Retour au menu</a>
</p>

<div style="max-width:1100px; margin:0 auto;">

    <!-- Titre -->
    <h1 style="color:#ff9b38; margin:0 0 18px; font-size:32px;">Mon profil</h1>

    <!-- Carte principale -->
    <div style="
        background:#11151f;
        border-radius:24px;
        padding:24px 32px 28px;
        border:1px solid #262b3a;
        box-shadow:0 18px 60px rgba(0,0,0,0.6);
    ">

        <div style="display:flex; gap:32px; flex-wrap:wrap; align-items:flex-start;">

            <!-- Colonne gauche : avatar + Ã©dition -->
            <div style="flex:0 0 260px;">
                <!-- Avatar actuel -->
                <div style="
                    width:220px;
                    height:220px;
                    border-radius:24px;
                    border:1px solid #262b3a;
                    background:#171b2a;
                    display:flex;
                    align-items:center;
                    justify-content:center;
                    margin-bottom:16px;
                ">
                    <img src="{{.Avatar}}" alt="Avatar actuel" style="max-width:180px; max-height:180px;">
                </div>

                <!-- Formulaire de mise Ã  jour -->
                <form method="POST" action="/profile" style="font-size:14px;">
                    <!-- email -->
                    <div style="margin-bottom:10px;">
                        <label for="email" style="display:block; margin-bottom:4px; color:#aeb6d8;">Email</label>
                        <input
                            type="email"
                            id="email"
                            name="email"
                            value="{{.Email}}"
                            style="
                                width:100%;
                                box-sizing:border-box;
                                padding:6px 8px;
                                border-radius:8px;
                                border:1px solid #262b3a;
                                background:#141827;
                                color:#f5f5f5;
                                outline:none;
                            ">
                    </div>

                    <!-- Choix d'avatar -->
                    <p style="margin:10px 0 6px; color:#aeb6d8;">Choisir un avatar :</p>
                    <div style="
                        display:grid;
                        grid-template-columns:repeat(4, minmax(0,1fr));
                        gap:6px;
                        margin-bottom:10px;
                    ">
                        {{ $current := .Avatar }}
                        {{ range $i := rangeN 12 }}
                            {{ $index := add $i 1 }}
                            {{ $path := printf "/static/avatars/avatar%d.png" $index }}
                            <label style="
                                display:block;
                                text-align:center;
                                cursor:pointer;
                                padding:4px;
                                border-radius:10px;
                                border:2px solid {{if eq $path $current}}#ff9b38{{else}}transparent{{end}};
                                background:#171b2a;
                            ">
                                <input type="radio" name="avatar" value="{{$path}}" {{if eq $path $current}}checked{{end}} style="display:none;">
                                <img src="{{$path}}" alt="avatar {{$index}}" style="width:56px; height:56px; object-fit:contain;">
                            </label>
                        {{ end }}
                    </div>

                    <button type="submit" style="
                        width:100%;
                        margin-top:4px;
                        padding:8px 10px;
                        border:none;
                        border-radius:10px;
                        background:#ff9b38;
                        color:#11151f;
                        font-weight:600;
                        cursor:pointer;
                    ">
                        ðŸ’¾ Sauvegarder les modifications
                    </button>
                </form>
            </div>

            <!-- Colonne droite : infos + stats -->
            <div style="flex:1 1 320px;">

                <!-- Nom + email affichÃ©s joliment -->
                <h2 style="margin:0 0 4px; font-size:26px;">{{.Username}}</h2>
                {{if .Email}}
                    <p style="margin:0 0 18px; font-size:15px;">
                        Email : <span style="font-weight:600;">{{.Email}}</span>
                    </p>
                {{else}}
                    <p style="margin:0 0 18px; font-size:15px; color:#aeb6d8;">
                        Email non renseignÃ©
                    </p>
                {{end}}

                <!-- Grille de stats -->
                <div style="
                    display:grid;
                    grid-template-columns:repeat(3, minmax(0,130px));
                    gap:10px;
                ">
                    <div style="
                        background:#161a29;
                        border-radius:14px;
                        padding:10px 12px;
                        border:1px solid #262b3a;
                    ">
                        <div style="font-size:11px; text-transform:uppercase; letter-spacing:.06em; color:#9ca4c7;">
                            ELO
                        </div>
                        <div style="font-size:20px; font-weight:600;">{{.ELO}}</div>
                    </div>

                    <div style="
                        background:#161a29;
                        border-radius:14px;
                        padding:10px 12px;
                        border:1px solid #262b3a;
                    ">
                        <div style="font-size:11px; text-transform:uppercase; letter-spacing:.06em; color:#9ca4c7;">
                            Parties
                        </div>
                        <div style="font-size:20px; font-weight:600;">{{.GamesPlayed}}</div>
                    </div>

                    <div style="
                        background:#161a29;
                        border-radius:14px;
                        padding:10px 12px;
                        border:1px solid #262b3a;
                    ">
                        <div style="font-size:11px; text-transform:uppercase; letter-spacing:.06em; color:#9ca4c7;">
                            Victoires
                        </div>
                        <div style="font-size:20px; font-weight:600;">{{.Wins}}</div>
                    </div>

                    <div style="
                        background:#161a29;
                        border-radius:14px;
                        padding:10px 12px;
                        border:1px solid #262b3a;
                    ">
                        <div style="font-size:11px; text-transform:uppercase; letter-spacing:.06em; color:#9ca4c7;">
                            DÃ©faites
                        </div>
                        <div style="font-size:20px; font-weight:600;">{{.Losses}}</div>
                    </div>

                    <div style="
                        background:#161a29;
                        border-radius:14px;
                        padding:10px 12px;
                        border:1px solid #262b3a;
                    ">
                        <div style="font-size:11px; text-transform:uppercase; letter-spacing:.06em; color:#9ca4c7;">
                            Nuls
                        </div>
                        <div style="font-size:20px; font-weight:600;">{{.Draws}}</div>
                    </div>
                </div>

            </div>
        </div>
    </div>

</div>

</body>
</html>

